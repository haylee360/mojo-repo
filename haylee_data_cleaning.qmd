---
title: "Stream Data"
author: "Haylee Oyler"
format: html
editor: source
execute:
  warning: false
  message: false
editor_options: 
  chunk_output_type: console
---

#### Setup

```{r}
library(tidyverse)
library(janitor)
library(here)
library(lubridate)
library(skimr)
library(patchwork)
```

## Set wd and read in data
```{r}
setwd("/courses/EDS214/group_project/2024/team-mojo-jojo/raw_data")

BQ1 <- read_csv("/courses/EDS214/group_project/2024/team-mojo-jojo/raw_data/QuebradaCuenca1-Bisley.csv")
BQ2 <- read_csv("QuebradaCuenca2-Bisley.csv")
BQ3 <- read_csv("QuebradaCuenca3-Bisley.csv")
PRM <- read_csv("RioMameyesPuenteRoto.csv")
```

## Clean data
```{r}
# Clean data frame names and date
BQ1 <- BQ1 %>% 
  clean_names() %>% 
  mutate(date = ymd(sample_date)) 

BQ2 <- BQ2 %>% 
  clean_names() %>% 
  mutate(date = ymd(sample_date)) 

BQ3 <- BQ3 %>% 
  clean_names() %>% 
  mutate(date = ymd(sample_date)) 

PRM <- PRM %>% 
  clean_names() %>% 
  mutate(date = ymd(sample_date)) 

```

```{r}
# Bind the data frames together 
BQ12 <- rbind(BQ1, BQ2)
BQ3PRM <- rbind(BQ3, PRM)

stream_df <- rbind(BQ12, BQ3PRM)
```

## Explore data

```{r}
summary(stream_df)
names(stream_df)
skim(stream_df)
```


## Plot data
```{r}
plot1_df <- stream_df %>% 
  select(date, k, no3_n, sample_id) %>% 
  mutate(year = year(date)) %>% 
  # filter(year >= 1988 & year <= 1994)
  filter(year %in% 1988:1994)
```

```{r}
ggplot(plot1_df, aes(x = date, y = k)) + 
  geom_smooth(aes(linetype = sample_id)) +
  theme(axis.text.x = element_blank(),
        axis.ticks.x = element_blank())
```

